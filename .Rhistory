labs(y = "", x = "Tree canopy cover (%)") +
scale_x_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .75, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0, height = .3),
col = "grey40",
na.rm = T) +
labs(y = "", x = "Tree canopy cover (%)") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .5, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0, height = .3),
col = "grey40",
na.rm = T) +
labs(y = "", x = "Tree canopy cover (%)") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.3, height = 0),
col = "grey40",
na.rm = T) +
labs(y = "", x = "Tree canopy cover (%)") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.2, height = 0),
col = "grey40",
na.rm = T) +
labs(y = "", x = "Tree canopy cover (%)") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs(y = "", x = "Tree canopy cover (%)") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = "Tree canopy cover (%)") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
rename(`Area of concentrated affluence` = aca)
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = "Tree canopy cover (%)", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = "Tree canopy cover (%)", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent,
ppov185,
ppov500,
mdhhincnow,
phhi_qntl1,
phhi_qntl5,
mdern_ftyr) %>%
rename(
`Income < 185% poverty threshold` =  ppov185,
`Income > 500% poverty threshold` = ppov500,
`Median household income` = mdhhincnow,
`Households in bottom quintile for income` = phhi_qntl1,
`Households in top quintile for income` = phhi_qntl5,
`Median annual earnings for full-time workers` = mdern_ftyr) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
ggplot(aes(x = value, y = canopy_percent)) +
geom_point(pch = 21, col = "grey40") +#colors$suppGray) +
geom_smooth(col = councilR::colors$cdGreen, fill = NA, lwd = 1, method = 'lm') +
councilR::council_theme() +
scale_y_continuous(labels = scales::percent, limits = c(0, .45))+#, trans = log2_trans()) +
# scale_x_continuous(labels = scales::percent)+#, trans = log2_trans()) +
facet_wrap(~Race, scales = "free_x", ncol = 2) +
labs(x = "Residents identifying with racial category (%)", y = "")
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent,
ppov185,
ppov500,
mdhhincnow,
phhi_qntl1,
phhi_qntl5,
mdern_ftyr) %>%
rename(
`Income < 185% poverty threshold (% households)` =  ppov185,
`Income > 500% poverty threshold (% households)` = ppov500,
`Median household income ($)` = mdhhincnow,
`Households in bottom quintile for income (%)` = phhi_qntl1,
`Households in top quintile for income (%)` = phhi_qntl5,
`Median annual earnings for full-time workers ($)` = mdern_ftyr) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
ggplot(aes(x = value, y = canopy_percent)) +
geom_point(pch = 21, col = "grey40") +#colors$suppGray) +
geom_smooth(col = councilR::colors$cdGreen, fill = NA, lwd = 1, method = 'lm') +
councilR::council_theme() +
scale_y_continuous(labels = scales::percent, limits = c(0, .45))+#, trans = log2_trans()) +
# scale_x_continuous(labels = scales::percent)+#, trans = log2_trans()) +
facet_wrap(~Race, scales = "free_x", ncol = 2) +
labs(x = "Income category", y = "")
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = "Tree canopy cover (%)", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .6,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = " ", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .4,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = " ", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .2,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = " ", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .3,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = " ", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent,
ppov185,
ppov500,
mdhhincnow,
phhi_qntl1,
phhi_qntl5,
mdern_ftyr) %>%
rename(
`Income < 185% poverty threshold (% households)` =  ppov185,
`Income > 500% poverty threshold (% households)` = ppov500,
`Median household income ($)` = mdhhincnow,
`Households in bottom quintile for income (%)` = phhi_qntl1,
`Households in top quintile for income (%)` = phhi_qntl5,
`Median annual earnings for full-time workers ($)` = mdern_ftyr) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
ggplot(aes(x = value, y = canopy_percent)) +
geom_point(pch = 21, col = "grey40") +#colors$suppGray) +
geom_smooth(col = councilR::colors$cdGreen, fill = NA, lwd = 1, method = 'lm') +
councilR::council_theme() +
scale_y_continuous(labels = scales::percent, limits = c(0, .45))+#, trans = log2_trans()) +
# scale_x_continuous(labels = scales::percent)+#, trans = log2_trans()) +
facet_wrap(~Race, scales = "free_x", ncol = 2) +
labs(x = "Income category", y = "")
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent,
ppov185,
ppov500,
mdhhincnow,
phhi_qntl1,
phhi_qntl5,
# mdern_ftyr
) %>%
rename(
`Income < 185% poverty threshold (% households)` =  ppov185,
`Income > 500% poverty threshold (% households)` = ppov500,
`Median household income ($)` = mdhhincnow,
`Households in bottom quintile for income (%)` = phhi_qntl1,
`Households in top quintile for income (%)` = phhi_qntl5,
# `Median annual earnings for full-time workers ($)` = mdern_ftyr
) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
ggplot(aes(x = value, y = canopy_percent)) +
geom_point(pch = 21, col = "grey40") +#colors$suppGray) +
geom_smooth(col = councilR::colors$cdGreen, fill = NA, lwd = 1, method = 'lm') +
councilR::council_theme() +
scale_y_continuous(labels = scales::percent, limits = c(0, .45))+#, trans = log2_trans()) +
# scale_x_continuous(labels = scales::percent)+#, trans = log2_trans()) +
facet_wrap(~Race, scales = "free_x", ncol = 2) +
labs(x = "Income category", y = "")
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent,
ppov185,
ppov500,
# mdhhincnow,
phhi_qntl1,
phhi_qntl5,
# mdern_ftyr
) %>%
rename(
`Income < 185% poverty threshold (% households)` =  ppov185,
`Income > 500% poverty threshold (% households)` = ppov500,
# `Median household income ($)` = mdhhincnow,
`Households in bottom quintile for income (%)` = phhi_qntl1,
`Households in top quintile for income (%)` = phhi_qntl5,
# `Median annual earnings for full-time workers ($)` = mdern_ftyr
) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
ggplot(aes(x = value, y = canopy_percent)) +
geom_point(pch = 21, col = "grey40") +#colors$suppGray) +
geom_smooth(col = councilR::colors$cdGreen, fill = NA, lwd = 1, method = 'lm') +
councilR::council_theme() +
scale_y_continuous(labels = scales::percent, limits = c(0, .45))+#, trans = log2_trans()) +
# scale_x_continuous(labels = scales::percent)+#, trans = log2_trans()) +
facet_wrap(~Race, scales = "free_x", ncol = 2) +
labs(x = "Income category", y = "")
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent,
ppov185,
ppov500,
# mdhhincnow,
phhi_qntl1,
phhi_qntl5,
# mdern_ftyr
) %>%
rename(
`Income < 185% poverty threshold` =  ppov185,
`Income > 500% poverty threshold` = ppov500,
# `Median household income ($)` = mdhhincnow,
`Households in bottom quintile for income` = phhi_qntl1,
`Households in top quintile for income` = phhi_qntl5,
# `Median annual earnings for full-time workers ($)` = mdern_ftyr
) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
ggplot(aes(x = value, y = canopy_percent)) +
geom_point(pch = 21, col = "grey40") +#colors$suppGray) +
geom_smooth(col = councilR::colors$cdGreen, fill = NA, lwd = 1, method = 'lm') +
councilR::council_theme() +
scale_y_continuous(labels = scales::percent, limits = c(0, .45))+#, trans = log2_trans()) +
scale_x_continuous(labels = scales::percent)+#, trans = log2_trans()) +
facet_wrap(~Race, scales = "free_x", ncol = 2) +
labs(x = "Households falling into income category (%)", y = "")
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
rename(`Area of concentrated affluence` = aca,
`Area of concentrated poverty` = acp) %>%
pivot_longer(names_to = "Race", values_to = "value", -c(tract_string, canopy_percent)) %>%
mutate(value = na_if(value, 0)) %>%
filter(!is.na(value)) %>%
ggplot(aes(x = Race, y = canopy_percent)) +
ggdist::stat_halfeye(
adjust = .5,  width = .3,  .width = 0,  justification = -.6,
point_colour = NA,
na.rm = T) +
geom_boxplot(width = .25, outlier.shape = NA,
na.rm = T) +
councilR::council_theme() +
geom_point(size = 1.3,alpha = .3,
position = position_jitter(seed = 1, width = 0.1, height = 0),
col = "grey40",
na.rm = T) +
labs( y = " ", x = "") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp)
mn_tracts %>%
right_join(eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
filter(acp == 1))
load("~/Documents/GitHub/planting.shade/data/mn_tracts.rda")
mn_tracts %>%
right_join(eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
filter(acp == 1))
mn_tracts %>%
right_join(eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
filter(acp == 1)) %>%
ggplot() +
geom_sf(aes(fill = canopy_percent))
mn_tracts %>%
right_join(eva_data_main %>%
select(tract_string, variable, raw_value) %>%
pivot_wider(names_from = variable, values_from = raw_value) %>%
select(tract_string, canopy_percent, aca, acp) %>%
filter(aca == 1)) %>%
ggplot() +
geom_sf(aes(fill = canopy_percent))
